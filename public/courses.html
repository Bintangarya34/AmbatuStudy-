<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmbatuStudy - Latihan Interaktif</title>
    <link rel="stylesheet" href="style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        /* ==================================== */
        /* Gaya Spesifik Latihan (Menggantikan Card Container Besar) */
        /* ==================================== */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center; /* Memusatkan item secara horizontal */
            padding: 50px 5%; 
            min-height: 80vh;
        }

        /* Halaman Pilih Materi */
        #materi-selection {
            width: 100%;
            max-width: 800px;
        }

        #materi-selection h2 {
            text-align: center;
            font-size: 30px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        #materi-selection p {
            text-align: center;
            color: #777;
            margin-bottom: 40px;
        }

        /* Grid Materi */
        .materi-grid {
            display: flex;
            gap: 30px; /* Jarak antar card disesuaikan */
            justify-content: center;
            flex-wrap: wrap; 
        }

        .materi-card {
            background-color: #ffffff;
            border: 1px solid #f0f0f0;
            border-radius: 30px;
            padding: 30px;
            /* Ukuran diperbesar */
            width: 350px; 
            text-align: center;
            cursor: pointer;
            /* Animasi Hover */
            transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); 
        }

        .materi-card:hover {
            transform: translateY(-3px); /* Efek lift */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1); 
        }

        .materi-icon {
            font-size: 60px;
            color: var(--light-blue);
            background-color: #e6f7ff;
            border-radius: 50%;
            padding: 15px;
            margin-bottom: 15px;
            display: inline-flex;
        }

        .materi-card h3 {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .materi-card p {
            font-size: 14px;
            color: #999;
            margin-bottom: 20px;
        }

        .materi-info {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .materi-info span {
            display: inline-block;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 12px;
            color: #333;
            background-color: #eee;
        }
        
        /* ==================================== */
        /* Halaman Kuis dan Hasil (Menggunakan gaya Card) */
        /* ==================================== */
        #quiz-section, #result-section {
            width: 100%;
            max-width: 800px; 
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
            display: none;
        }
        #quiz-section {
            padding: 30px;
        }
        
        #quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        #score-display {
            color: var(--light-blue); 
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #score-display .material-icons {
            font-size: 24px;
            color: var(--light-blue); 
        }
        /* ... (CSS Quiz/Opsi lainnya tetap sama) ... */
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin-bottom: 30px;
        }
        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background-color: var(--light-blue);
            border-radius: 4px;
            transition: width 0.3s;
        }
        #question-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
        }
        .option-item {
            display: flex;
            align-items: center;
            background-color: #f7f7f7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            border: 1px solid #f7f7f7;
            transition: background-color 0.15s, border-color 0.15s;
        }
        .option-item:hover {
            background-color: #eeeeee;
        }
        .option-item.correct {
            background-color: #e6ffe6; 
            border-color: #4CAF50; 
        }
        .option-item.incorrect {
            background-color: #ffe6e6;
            border-color: #F44336; 
        }
        .option-letter {
            width: 30px;
            height: 30px;
            background-color: #e0e0e0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 600;
            margin-right: 15px;
        }
        .option-item.correct .option-letter {
            background-color: #4CAF50;
            color: #ffffff;
        }
        .option-item.incorrect .option-letter {
            background-color: #F44336;
            color: #ffffff;
        }
        .status-icon {
            margin-left: auto;
            font-size: 24px;
        }
        .option-item.correct .status-icon {
            color: #4CAF50;
        }
        .option-item.incorrect .status-icon {
            color: #F44336;
        }


        /* Gaya Halaman Hasil (REVISI AKHIR) */
        #result-section {
            text-align: center;
            padding: 40px; 
        }
        .result-icon {
            margin-top: 10px; 
            margin-bottom: 30px; 
            font-size: 60px;
            color: var(--light-blue);
            background-color: #e6f7ff;
            border-radius: 50%;
            padding: 20px;
            display: inline-block;
        }
        #result-section h2 {
            font-size: 36px;
            margin-top: 15px; 
            margin-bottom: 10px;
        }
        #result-score {
            font-size: 60px;
            font-weight: 700;
            color: var(--light-blue);
            margin: 30px 0; 
        }
        #result-bar-container {
            width: 50%;
            margin: 0 auto 40px auto; 
        }
        .result-message {
            background-color: #f0f8ff;
            border: 1px solid #cceeff;
            padding: 25px;
            border-radius: 20px;
            margin: 0 auto 40px auto; 
            color: #555;
            font-size: 14px;
            width: 90%; 
            max-width: 700px;
        }
        .result-message p {
            line-height: 1.6;
            margin: 5px 0;
        }
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .result-actions button {
            flex-grow: 1; 
            max-width: 200px; 
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, transform 0.2s;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 8px; 
        }
        #repeat-quiz-btn {
            background-color: var(--light-blue);
            color: white;
        }
        #repeat-quiz-btn:hover {
            background-color: var(--cta-blue);
            transform: translateY(-2px);
        }
        #home-btn {
            background-color: #f0f0f0;
            color: #555;
            border: 1px solid #ddd; 
        }
        #home-btn:hover {
            background-color: #e0e0e0;
            color: #333;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <span class="material-icons logo-icon">school</span>
            <div class="logo-text">
                <span class="site-name">Ambatu-train</span> 
                <span class="tagline">Belajar dengan latihan Interaktif</span>
            </div>
        </div>

        <div class="nav-right-side">
            <ul class="nav-links">
                <li><a href="home.html" >Home</a></li> 
                <li><a href="materi.html">Catatan</a></li>
                <li><a href="courses.html" class="active-link">Latihan</a></li>
                <li><a href="videos.html">Video</a></li>
            </ul>

            <a href="index.html" class="logout-button">
                <span class="material-icons">logout</span>
                Log Out
            </a>
        </div>
    </nav>

    <div class="main-content">

        <div id="materi-selection">
            <h2>Pilih Materi</h2>
            <p>Pilih kategori materi yang ingin Anda pelajari</p>
            
            <div class="materi-grid">
                <div class="materi-card" data-materi="aljabar">
                    <span class="material-icons materi-icon">assignment</span>
                    <h3>Aljabar Linear</h3>
                    <p>Vektor, matriks, determinan, dan sistem persamaan liner</p>
                    <div class="materi-info">
                        <span>10 Soal</span>
                        <span>Pemula - Menengah</span>
                    </div>
                </div>
                
                <div class="materi-card" data-materi="kalkulus">
                    <span class="material-icons materi-icon">assignment</span>
                    <h3>Kalkulus 1</h3>
                    <p>Limit, turunan, integral, dan aplikasi kalkulus dasar</p>
                    <div class="materi-info">
                        <span>10 Soal</span>
                        <span>Pemula - Menengah</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="quiz-section">
            <div id="quiz-header">
                <span id="question-count">Pertanyaan 1 dari 10</span>
                <span id="score-display">
                    <span class="material-icons">emoji_events</span> 0
                </span>
            </div>
            
            <div class="progress-bar"><div class="progress-bar-fill" id="progress-fill"></div></div>

            <div id="question-area">
                <p id="question-text">Hasil dari 2x + 3x = ?</p>
                
                <div id="options-container">
                    </div>
            </div>
        </div>

        <div id="result-section">
            <span class="material-icons result-icon">emoji_events</span>
            <h2>Quiz selesai!</h2>
            <p>Sealamat, Anda telah menyelesaikan quiz</p>
            
            <div id="result-score">5/10</div>
            <div id="result-bar-container">
                <div class="progress-bar" style="height: 12px;"><div class="progress-bar-fill" id="final-progress-fill"></div></div>
            </div>
            
            <div class="result-message">
                <p><strong>Keep Practicing!</strong></p>
                <p>Jangan Menyerah! Coba pelajari materi lebih dalam dan ulangi quiz.</p>
            </div>
            
            <div class="result-actions">
                <button id="repeat-quiz-btn" class="cta-button">
                    <span class="material-icons">refresh</span> Ulangi Quiz
                </button>
                <button id="home-btn" onclick="window.location.href='home.html'">
                    Kembali ke Home
                </button>
            </div>
        </div>

    </div>

    <script>
        const quizData = {
            aljabar: [
                { question: "Hasil dari 2x + 3x = ?", options: ["3x", "5x", "6x", "7x"], answer: "5x" },
                { question: "Jika 4y - 7 = 13, berapakah nilai y?", options: ["3", "5", "6", "10"], answer: "5" },
                { question: "Hasil dari (a+b) * (a-b) adalah?", options: ["a² + b²", "2ab", "a² - b²", "a² - 2ab + b²"], answer: "a² - b²" },
                { question: "Sederhanakan 5(x - 2) + 3x", options: ["8x - 10", "8x - 2", "5x - 10", "8x + 10"], answer: "8x - 10" },
                { question: "Jika x = 3 dan y = 4, berapakah nilai dari 2x + y?", options: ["8", "10", "12", "16"], answer: "10" },
                { question: "Faktorkan x² - 9", options: ["(x-3)²", "(x+3)(x-3)", "(x+3)²", "x(x-9)"], answer: "(x+3)(x-3)" },
                { question: "Berapakah nilai x dari persamaan 2x + 5 = 15?", options: ["5", "10", "7.5", "2"], answer: "5" },
                { question: "Jika A = [[1, 2], [3, 4]] dan B = [[5, 6], [7, 8]], berapakah A + B?", options: ["[[6, 8], [10, 12]]", "[[5, 12], [21, 32]]", "[[6, 10], [10, 12]]", "[[6, 8], [9, 12]]"], answer: "[[6, 8], [10, 12]]" },
                { question: "Nilai determinan dari matriks [[2, 1], [4, 3]] adalah?", options: ["2", "6", "10", "4"], answer: "2" },
                { question: "Selesaikan sistem persamaan: x + y = 7 dan x - y = 3", options: ["x=5, y=2", "x=2, y=5", "x=4, y=3", "x=3, y=4"], answer: "x=5, y=2" }
            ],
            kalkulus: [
                { question: "Turunan pertama dari f(x) = x² adalah?", options: ["x", "2x", "x²", "1"], answer: "2x" },
                { question: "Integral dari 2x dx adalah?", options: ["x² + C", "2x² + C", "x + C", "x³/2 + C"], answer: "x² + C" },
                { question: "Limit x->0 dari (sin x)/x adalah?", options: ["0", "1", "tak hingga", "-1"], answer: "1" },
                { question: "Jika f(x) = 3x³, berapakah f'(x)?", options: ["x²", "6x²", "9x²", "3x²"], answer: "9x²" },
                { question: "Turunan dari e^x adalah?", options: ["x * e^(x-1)", "e^x", "e^x / x", "ln x"], answer: "e^x" },
                { question: "Hasil dari integral tentu dari 1 sampai 2 untuk x dx adalah?", options: ["1/2", "3/2", "2", "3"], answer: "3/2" },
                { question: "Apa definisi dari turunan?", options: ["Luas di bawah kurva", "Laju perubahan sesaat", "Total akumulasi", "Nilai maksimum fungsi"], answer: "Laju perubahan sesaat" },
                { question: "Limit dari konstanta c adalah?", options: ["0", "1", "c", "tak hingga"], answer: "c" },
                { question: "Turunan dari ln(x) adalah?", options: ["x", "1/x", "e^x", "ln x"], answer: "1/x" },
                { question: "Metode apa yang digunakan untuk mencari luas di antara dua kurva?", options: ["Diferensiasi", "Substitusi", "Integrasi Tentu", "Aturan Rantai"], answer: "Integrasi Tentu" }
            ]
        };

        let currentMateri = null;
        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswerLocked = false;

        const materiSelection = document.getElementById('materi-selection');
        const quizSection = document.getElementById('quiz-section');
        const resultSection = document.getElementById('result-section');

        // Elemen DOM untuk kuis setelah dimuat (pastikan ID sesuai)
        const questionCount = document.getElementById('question-count');
        const scoreDisplay = document.getElementById('score-display');
        const progressFill = document.getElementById('progress-fill');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');

        // Elemen DOM untuk hasil setelah dimuat
        const resultScore = document.getElementById('result-score');
        const finalProgressFill = document.getElementById('final-progress-fill');

        function initQuiz(materi) {
            currentMateri = materi;
            currentQuiz = quizData[materi];
            currentQuestionIndex = 0;
            score = 0;

            materiSelection.style.display = 'none';
            resultSection.style.display = 'none';
            quizSection.style.display = 'block';
            
            const repeatQuizBtn = document.getElementById('repeat-quiz-btn');
            if (repeatQuizBtn) {
                 repeatQuizBtn.removeEventListener('click', repeatQuizHandler);
                 repeatQuizBtn.addEventListener('click', repeatQuizHandler);
            }

            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= currentQuiz.length) {
                showResult();
                return;
            }

            const question = currentQuiz[currentQuestionIndex];
            isAnswerLocked = false;
            
            questionCount.textContent = `Pertanyaan ${currentQuestionIndex + 1} dari ${currentQuiz.length}`;
            scoreDisplay.innerHTML = `<span class="material-icons">emoji_events</span> ${score}`;
            progressFill.style.width = `${((currentQuestionIndex) / currentQuiz.length) * 100}%`;

            questionText.innerHTML = question.question.replace(/\^/g, '<sup>').replace(/\[/g, '<code>').replace(/\]/g, '</code>'); 
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option-item');
                optionElement.setAttribute('data-answer', option);
                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    <span class="option-text">${option.replace(/\^/g, '<sup>').replace(/\[/g, '<code>').replace(/\]/g, '</code>')}</span>
                    <span class="status-icon material-icons" style="display:none;"></span>
                `;
                optionElement.addEventListener('click', handleAnswerClick);
                optionsContainer.appendChild(optionElement);
            });
        }

        function handleAnswerClick(event) {
            if (isAnswerLocked) return;
            isAnswerLocked = true;

            const selectedOption = event.currentTarget;
            const selectedAnswer = selectedOption.getAttribute('data-answer');
            const correctAnswer = currentQuiz[currentQuestionIndex].answer;

            if (selectedAnswer === correctAnswer) {
                score++;
                selectedOption.classList.add('correct');
                selectedOption.querySelector('.status-icon').textContent = 'check_circle';
                scoreDisplay.innerHTML = `<span class="material-icons">emoji_events</span> ${score}`;
            } else {
                selectedOption.classList.add('incorrect');
                selectedOption.querySelector('.status-icon').textContent = 'cancel';
                
                document.querySelectorAll('.option-item').forEach(item => {
                    if (item.getAttribute('data-answer') === correctAnswer) {
                        item.classList.add('correct');
                        item.querySelector('.status-icon').textContent = 'check_circle';
                    }
                });
            }
            
            selectedOption.querySelector('.status-icon').style.display = 'inline';
            
            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 1500);
        }

        function showResult() {
            quizSection.style.display = 'none';
            resultSection.style.display = 'block';

            const totalQuestions = currentQuiz.length;
            const percentage = (score / totalQuestions) * 100;

            resultScore.textContent = `${score}/${totalQuestions}`;
            finalProgressFill.style.width = `${percentage}%`;
        }

        function repeatQuizHandler() {
            initQuiz(currentMateri);
        }
        
        // Event Listeners di materi-selection
        document.querySelectorAll('.materi-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const materi = e.currentTarget.getAttribute('data-materi');
                initQuiz(materi);
            });
        });

        // Inisialisasi tampilan awal
        materiSelection.style.display = 'block';
        quizSection.style.display = 'none';
        resultSection.style.display = 'none';
    </script>
</body>
</html>