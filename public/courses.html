<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Video tutorial matematika Ambatustudy: aljabar, kalkulus, dan materi populer.">
  <title>Ambatustudy ‚Äî Learn</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="site">
    <header>
      <div class="brand">
        <div class="logo">AS</div>
        <div>
          <h1>Ambatu-train</h1>
          <div style="font-size:12px;color:var(--muted)">Belajar Matematika Lebih Mudah</div>
        </div>
      </div>
      <nav>
        <a href="index.html">Home</a>
        <a href="notes.html">Catatan</a>
        <a href="courses.html" class="cta">Latihan</a>
        <a href="videos.html">Video</a>
        <button class="dark-toggle" id="toggleMode" aria-label="Toggle dark mode">üåô</button>
      </nav>
    </header>

    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
      <div class="login-container">
        <div class="login-header">
          <h3>Masuk untuk Mengerjakan Latihan</h3>
          <p>Masukkan nama Anda untuk mulai mengerjakan soal-soal latihan</p>
        </div>
        
        <div class="login-body">
          <div class="login-form">
            <label for="userName">Nama Anda:</label>
            <input type="text" id="userName" placeholder="Contoh: Budi Santoso" maxlength="50" autocomplete="name">
            <button id="loginBtn" class="login-submit">Mulai Latihan</button>
          </div>
          
          <div class="login-footer">
            <p>Nama akan ditampilkan selama sesi latihan ini</p>
          </div>
        </div>
      </div>
    </div>

    <main>
      <section class="content">
        <h2 class="chapter">Latihan: Aljabar Linear</h2>
        <p class="lead">Kerjakan soal-soal berikut untuk mengasah pemahamanmu tentang Aljabar Linear.</p>

        <div id="quiz-container">
          <!-- Soal akan dimuat otomatis lewat JS -->
        </div>

        <button id="next-btn" class="cta" style="margin-top:16px;">Soal Selanjutnya</button>
      </section>
    </main>

    <footer>
      <p>¬© 2025 Ambatustudy. Latihan Aljabar Linear tanpa ribet.</p>
    </footer>
  </div>

  <script>
    const questions = [
      {
        question: "Jika matriks A = [[2, 3], [1, 4]], maka determinan A adalah ...",
        options: ["5", "2", "11", "8"],
        answer: "5"
      },
      {
        question: "Hasil dari perkalian matriks [[1, 2], [3, 4]] √ó [[2, 0], [1, 2]] adalah ...",
        options: [
          "[[4, 4], [10, 8]]",
          "[[2, 1], [3, 4]]",
          "[[2, 0], [1, 2]]",
          "[[3, 3], [7, 7]]"
        ],
        answer: "[[4, 4], [10, 8]]"
      },
      {
        question: "Jika vektor a = (2, 3) dan b = (1, -1), maka hasil dot product a¬∑b adalah ...",
        options: ["-1", "5", "0", "2"],
        answer: "-1"
      },
      {
        question: "Persamaan sistem: x + y = 5 dan x - y = 1. Nilai x adalah ...",
        options: ["3", "2", "4", "1"],
        answer: "3"
      }
    ];

    let currentQuestion = 0;
    const quizContainer = document.getElementById('quiz-container');
    const nextBtn = document.getElementById('next-btn');

    function loadQuestion() {
      const q = questions[currentQuestion];
      quizContainer.innerHTML = `
        <div class="question-block">
          <h3>${currentQuestion + 1}. ${q.question}</h3>
          <div class="options">
            ${q.options.map(opt => `
              <label class="option">
                <input type="radio" name="option" value="${opt}"> ${opt}
              </label>
            `).join('')}
          </div>
        </div>
      `;
      nextBtn.disabled = false;
    }

    nextBtn.addEventListener('click', () => {
      const selected = document.querySelector('input[name="option"]:checked');
      if (!selected) {
        alert('Pilih salah satu jawaban dulu!');
        return;
      }
      const answer = selected.value;
      const correct = questions[currentQuestion].answer;

      const result = document.createElement('div');
      result.className = answer === correct ? 'jawaban' : 'note';
      result.innerHTML = answer === correct
        ? '‚úÖ Jawaban benar!'
        : `‚ùå Jawaban salah! Jawaban yang benar: <b>${correct}</b>`;

      quizContainer.appendChild(result);

      if (currentQuestion < questions.length - 1) {
        nextBtn.textContent = "Soal Berikutnya";
        nextBtn.onclick = () => {
          currentQuestion++;
          loadQuestion();
        };
      } else {
        nextBtn.textContent = "Selesai";
        nextBtn.onclick = () => {
          quizContainer.innerHTML = "<h3>üéâ Latihan selesai! Bagus sekali!</h3>";
          nextBtn.style.display = "none";
        };
      }
    });

    loadQuestion();

  </script>
  
  <!-- Login System Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const loginModal = document.getElementById('loginModal');
      const loginBtn = document.getElementById('loginBtn');
      const userNameInput = document.getElementById('userName');
      const quizContainer = document.getElementById('quiz-container');
      const nextBtn = document.getElementById('next-btn');

      // Check if user is already logged in
      function checkLoginStatus() {
        const savedUser = localStorage.getItem('ambatuStudyUser');
        if (savedUser) {
          showWelcomeUser(JSON.parse(savedUser));
          return true;
        }
        return false;
      }

      // Show login modal
      function showLoginModal() {
        loginModal.classList.add('show');
        userNameInput.focus();
      }

      // Hide login modal
      function hideLoginModal() {
        loginModal.classList.remove('show');
      }

      // Show welcome message and update header
      function showWelcomeUser(user) {
        // Update header with user info
        const nav = document.querySelector('nav');
        const existingWelcome = nav.querySelector('.user-welcome');
        
        if (!existingWelcome) {
          const userWelcome = document.createElement('div');
          userWelcome.className = 'user-welcome';
          userWelcome.innerHTML = `
            <div class="user-icon">${user.name.charAt(0).toUpperCase()}</div>
            <span>Halo, ${user.name}!</span>
            <button class="logout-btn" onclick="logoutUser()" title="Keluar">‚úï</button>
          `;
          
          // Insert before dark mode toggle
          const darkToggle = nav.querySelector('.dark-toggle');
          nav.insertBefore(userWelcome, darkToggle);
        }
      }

      // Handle login
      function handleLogin() {
        const name = userNameInput.value.trim();
        
        if (name.length < 2) {
          alert('Nama minimal 2 karakter ya!');
          userNameInput.focus();
          return;
        }
        
        if (name.length > 50) {
          alert('Nama terlalu panjang, maksimal 50 karakter');
          userNameInput.focus();
          return;
        }

        const user = {
          name: name,
          loginTime: new Date().toISOString(),
          id: Date.now()
        };

        // Save to localStorage
        localStorage.setItem('ambatuStudyUser', JSON.stringify(user));
        
        // Show welcome and hide modal
        showWelcomeUser(user);
        hideLoginModal();
      }

      // Event listeners
      loginBtn.addEventListener('click', handleLogin);
      
      userNameInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          handleLogin();
        }
      });

      userNameInput.addEventListener('input', function() {
        loginBtn.disabled = this.value.trim().length < 2;
      });

      // Logout function (global scope)
      window.logoutUser = function() {
        if (confirm('Yakin ingin keluar? Progress latihan akan hilang.')) {
          localStorage.removeItem('ambatuStudyUser');
          location.reload();
        }
      };

      // Initialize
      if (!checkLoginStatus()) {
        // Hide quiz content until logged in
        quizContainer.style.display = 'none';
        nextBtn.style.display = 'none';
        
        // Show login modal after short delay for smooth UX
        setTimeout(showLoginModal, 300);
      }
    });
  </script>
  
  <!-- Dark mode script -->
  <script src="script_clean.js"></script>
</body>
</html>
